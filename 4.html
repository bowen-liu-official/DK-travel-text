<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DK traveler - æµ·å—ä¸“å±æ—…è¡Œè®¡åˆ’</title>
    <!-- å¼•å…¥axios -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <!-- å¼•å…¥Font Awesomeå›¾æ ‡åº“ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* å…¨å±€æ ·å¼é‡ç½® */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft Yahei', sans-serif;
        }
        /* èƒŒæ™¯å±‚ - æµ·å—é£æ™¯å›¾å…¨å±è¦†ç›– */
        body {
            background: url('https://img0.baidu.com/it/u=1078290220,3825252339&fm=253&fmt=auto&app=138&f=JPEG?w=889&h=500') no-repeat center center fixed;
            background-size: cover; /* èƒŒæ™¯å›¾è‡ªé€‚åº”å…¨å± */
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            /* èƒŒæ™¯å›¾æš—åŒ–ï¼Œçªå‡ºç™»å½•å¡ç‰‡ */
            position: relative;
        }
        /* èƒŒæ™¯é®ç½©å±‚ - æå‡æ–‡å­—å¯è¯»æ€§ */
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.3); /* åŠé€æ˜é»‘è‰²é®ç½© */
            z-index: 1;
        }
        /* ===================== æ–°å¢ï¼šå¸®åŠ©æŒ‰é’®æ ·å¼ ===================== */
        .help-btn {
            position: fixed;
            top: 25px;
            right: 25px;
            width: 50px;
            height: 50px;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            cursor: pointer;
            z-index: 10;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .help-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
            background-color: #f8fafc;
        }
        
        .help-btn i {
            font-size: 24px;
            color: #3182ce;
        }
        /* ç™»å½•å¡ç‰‡ - ç£¨ç ‚ç»ç’ƒæ•ˆæœ+å±‚æ¬¡æ„Ÿ */
        .login-card {
            background-color: rgba(255, 255, 255, 0.9); /* åŠé€æ˜ç™½è‰² */
            backdrop-filter: blur(10px); /* ç£¨ç ‚ç»ç’ƒæ•ˆæœ */
            -webkit-backdrop-filter: blur(10px); /* å…¼å®¹è‹¹æœæµè§ˆå™¨ */
            padding: 45px 40px;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15); /* æ›´æŸ”å’Œçš„é˜´å½± */
            width: 100%;
            max-width: 420px;
            border: 1px solid rgba(255, 255, 255, 0.2); /* ç»†è¾¹æ¡†å¢åŠ è´¨æ„Ÿ */
            position: relative;
            z-index: 2; /* é«˜äºèƒŒæ™¯é®ç½© */
        }
        /* æ ‡é¢˜æ ·å¼ä¼˜åŒ– */
        .login-card h2 {
            text-align: center;
            margin-bottom: 8px;
            color: #2d3748;
            font-size: 28px;
            font-weight: 600;
            letter-spacing: 0.5px;
        }
        /* å‰¯æ ‡é¢˜æ ·å¼ */
        .login-subtitle {
            text-align: center;
            color: #4a5568;
            font-size: 16px;
            font-weight: 400;
            width: 100%;
            margin-bottom: 35px;
            line-height: 1.5;
        }
        /* è¾“å…¥æ¡†ç»„ - æ›´ç²¾è‡´çš„æ ·å¼ */
        .input-group {
            margin-bottom: 22px;
        }
        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: #4a5568;
            font-size: 14px;
            font-weight: 500;
        }
        .input-group input {
            width: 100%;
            padding: 14px 18px;
            border: 1px solid #e2e8f0;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
            background-color: rgba(255, 255, 255, 0.8);
        }
        /* è¾“å…¥æ¡†èšç„¦æ•ˆæœ */
        .input-group input:focus {
            outline: none;
            border-color: #3182ce;
            box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.1);
            background-color: white;
        }
        /* è¾“å…¥æ¡†å ä½ç¬¦æ ·å¼ */
        .input-group input::placeholder {
            color: #a0aec0;
            font-size: 15px;
        }
        /* ===================== æ–°å¢ï¼šå¿˜è®°å¯†ç é“¾æ¥æ ·å¼ ===================== */
        .forgot-password {
            text-align: right;
            margin-top: 8px;
            margin-bottom: 15px;
        }
        
        .forgot-password a {
            color: #3182ce;
            text-decoration: none;
            font-size: 14px;
            transition: color 0.3s ease;
        }
        
        .forgot-password a:hover {
            color: #2b6cb0;
            text-decoration: underline;
        }
        /* æŒ‰é’®ç»„ï¼ˆç™»å½•+æ³¨å†Œï¼‰ */
        .btn-group {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
        }
        .login-btn, .register-btn {
            flex: 1;
            padding: 14px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 0.5px;
        }
        /* ç™»å½•æŒ‰é’® - æ—…è¡Œè“ä¸»è‰²è°ƒ */
        .login-btn {
            background-color: #3182ce;
            color: white;
        }
        .login-btn:hover {
            background-color: #2b6cb0;
            transform: translateY(-2px); /* è½»å¾®ä¸Šç§»ï¼Œå¢åŠ äº¤äº’æ„Ÿ */
            box-shadow: 0 4px 12px rgba(49, 130, 206, 0.3);
        }
        /* æ³¨å†ŒæŒ‰é’® - æ¸…æ–°ç»¿ */
        .register-btn {
            background-color: #38a169;
            color: white;
        }
        .register-btn:hover {
            background-color: #2f855a;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(56, 161, 105, 0.3);
        }
        /* æç¤ºä¿¡æ¯ */
        .message {
            font-size: 14px;
            text-align: center;
            margin-top: 10px;
            display: none;
            padding: 8px;
            border-radius: 6px;
        }
        .error-message {
            color: #e53e3e;
            background-color: rgba(229, 62, 62, 0.08);
        }
        .success-message {
            color: #38a169;
            background-color: rgba(56, 161, 105, 0.08);
        }
        /* æµ‹è¯•æ¨¡å¼æç¤º */
        .test-tip {
            font-size: 12px;
            color: #718096;
            text-align: center;
            margin-top: 15px;
            opacity: 0.8;
        }
        /* ===================== æ–°å¢ï¼šæ¨¡æ€æ¡†æ ·å¼ ===================== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 12px;
            width: 90%;
            max-width: 500px; /* æ¯”ç™»å½•å¡ç‰‡å¤§ï¼Œæ¯”æ•´ä¸ªé¡µé¢å° */
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            animation: slideDown 0.3s ease;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .modal-title {
            font-size: 22px;
            font-weight: 600;
            color: #2d3748;
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #718096;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background-color 0.3s;
        }
        
        .close-modal:hover {
            background-color: #f7fafc;
            color: #2d3748;
        }
        
        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            margin-top: 25px;
        }
        
        .submit-btn, .cancel-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .submit-btn {
            background-color: #3182ce;
            color: white;
        }
        
        .submit-btn:hover {
            background-color: #2b6cb0;
        }
        
        .cancel-btn {
            background-color: #e2e8f0;
            color: #4a5568;
        }
        
        .cancel-btn:hover {
            background-color: #cbd5e0;
        }
        /* ===================== æ–°å¢ï¼šå¸®åŠ©å†…å®¹æ ·å¼ ===================== */
        .help-content {
            padding: 0 10px;
        }
        
        .help-section {
            margin-bottom: 25px;
        }
        
        .help-section h3 {
            font-size: 18px;
            color: #2d3748;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 2px solid #3182ce;
            display: inline-block;
        }
        
        .help-section p {
            color: #4a5568;
            line-height: 1.6;
            margin-bottom: 10px;
            font-size: 15px;
        }
        
        .help-list {
            padding-left: 20px;
            margin-top: 10px;
        }
        
        .help-list li {
            color: #4a5568;
            line-height: 1.6;
            margin-bottom: 8px;
            font-size: 15px;
        }
        
        .contact-info {
            background-color: #f7fafc;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            border-left: 4px solid #3182ce;
        }
        
        .contact-info p {
            margin-bottom: 5px;
        }
        
        .help-tip {
            background-color: #fff9db;
            padding: 12px;
            border-radius: 8px;
            margin-top: 15px;
            font-size: 14px;
            border-left: 4px solid #ffd43b;
        }
    </style>
</head>
<body>
    <!-- ===================== æ–°å¢ï¼šå¸®åŠ©æŒ‰é’® ===================== -->
    <div class="help-btn" onclick="showHelpModal()">
        <i class="fas fa-question-circle"></i>
    </div>
    
    <div class="login-card">
        <h2>DK Travel æµ·å—</h2>
        <div class="login-subtitle">å³åˆ»ç™»å½•ï¼Œè§£é”æ‚¨çš„ä¸ªæ€§åŒ–æµ·å—ä¹‹æ—…ï¼</div>
        <div class="input-group">
            <label for="username">ç”¨æˆ·å</label>
            <input type="text" id="username" placeholder="è¯·è¾“å…¥ä½ çš„ä¸“å±ç”¨æˆ·å">
        </div>
        <div class="input-group">
            <label for="password">å¯†ç </label>
            <input type="password" id="password" placeholder="è¯·è¾“å…¥ä½ çš„å¯†ç ">
            <!-- ===================== æ–°å¢ï¼šå¿˜è®°å¯†ç é“¾æ¥ ===================== -->
            <div class="forgot-password">
                <a href="javascript:void(0)" onclick="showForgotPasswordModal()">å¿˜è®°å¯†ç ï¼Ÿ</a>
            </div>
        </div>
        <!-- ç™»å½•+æ³¨å†ŒæŒ‰é’®ç»„ -->
        <div class="btn-group">
            <button class="login-btn" onclick="handleLogin()">ç™»å½•</button>
            <button class="register-btn" onclick="handleRegister()">æ³¨å†Œ</button>
        </div>
        <!-- æç¤ºä¿¡æ¯ -->
        <div class="message error-message" id="errorMsg"></div>
        <div class="message success-message" id="successMsg"></div>
        <!-- æµ‹è¯•æ¨¡å¼æç¤º -->
        <div class="test-tip">ğŸ’¡ æµ‹è¯•æ¨¡å¼ï¼šæœªè°ƒç”¨çœŸå®æ¥å£ | è”è°ƒæ—¶å…³é—­TEST_MODE</div>
    </div>

    <!-- ===================== æ–°å¢ï¼šå¿˜è®°å¯†ç æ¨¡æ€æ¡† ===================== -->
    <div id="forgotPasswordModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">é‡ç½®å¯†ç </h3>
                <button class="close-modal" onclick="closeForgotPasswordModal()">&times;</button>
            </div>
            <div class="input-group">
                <label for="resetEmail">æ³¨å†Œé‚®ç®±</label>
                <input type="email" id="resetEmail" placeholder="è¯·è¾“å…¥æ³¨å†Œæ—¶ä½¿ç”¨çš„é‚®ç®±åœ°å€">
            </div>
            <div class="input-group">
                <label for="usernameForReset">ç”¨æˆ·åï¼ˆå¯é€‰ï¼‰</label>
                <input type="text" id="usernameForReset" placeholder="è¯·è¾“å…¥ç”¨æˆ·åï¼ˆå¦‚æœè®°å¾—ï¼‰">
            </div>
            <div class="modal-footer">
                <button class="cancel-btn" onclick="closeForgotPasswordModal()">å–æ¶ˆ</button>
                <button class="submit-btn" onclick="handleForgotPassword()">å‘é€é‡ç½®é‚®ä»¶</button>
            </div>
            <div class="message error-message" id="modalErrorMsg"></div>
            <div class="message success-message" id="modalSuccessMsg"></div>
        </div>
    </div>

    <!-- ===================== æ–°å¢ï¼šå¸®åŠ©æ¨¡æ€æ¡† ===================== -->
    <div id="helpModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">ç™»å½•å¸®åŠ©ä¸­å¿ƒ</h3>
                <button class="close-modal" onclick="closeHelpModal()">&times;</button>
            </div>
            <div class="help-content">
                <!-- å¸¸è§é—®é¢˜éƒ¨åˆ† -->
                <div class="help-section">
                    <h3>å¸¸è§ç™»å½•é—®é¢˜</h3>
                    <p>å¦‚æœæ‚¨åœ¨ç™»å½•è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·å…ˆæŸ¥çœ‹ä»¥ä¸‹å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ³•ï¼š</p>
                    <ul class="help-list">
                        <li><strong>å¿˜è®°ç”¨æˆ·åæˆ–å¯†ç ï¼š</strong>ç‚¹å‡»ç™»å½•æ¡†ä¸‹æ–¹çš„"å¿˜è®°å¯†ç ï¼Ÿ"é“¾æ¥ï¼ŒæŒ‰ç…§æç¤ºé‡ç½®å¯†ç ã€‚</li>
                        <li><strong>ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼š</strong>è¯·æ£€æŸ¥å¤§å°å†™æ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿æ²¡æœ‰å¤šä½™çš„ç©ºæ ¼ã€‚</li>
                        <li><strong>è´¦æˆ·è¢«é”å®šï¼š</strong>è¿ç»­5æ¬¡è¾“å…¥é”™è¯¯å¯†ç ä¼šå¯¼è‡´è´¦æˆ·æš‚æ—¶é”å®šï¼Œè¯·ç­‰å¾…15åˆ†é’Ÿåé‡è¯•ã€‚</li>
                        <li><strong>æ— æ³•æ”¶åˆ°éªŒè¯é‚®ä»¶ï¼š</strong>è¯·æ£€æŸ¥åƒåœ¾é‚®ä»¶æ–‡ä»¶å¤¹ï¼Œæˆ–å°†æˆ‘ä»¬çš„é‚®ç®±æ·»åŠ è‡³ç™½åå•ã€‚</li>
                        <li><strong>é¡µé¢åŠ è½½ç¼“æ…¢æˆ–å¡é¡¿ï¼š</strong>è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼Œæˆ–å°è¯•åˆ·æ–°é¡µé¢ã€‚</li>
                        <li><strong>æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜ï¼š</strong>å»ºè®®ä½¿ç”¨Chromeã€Firefoxæˆ–Edgeæµè§ˆå™¨çš„æœ€æ–°ç‰ˆæœ¬ã€‚</li>
                    </ul>
                </div>
                
                <!-- æ³¨å†Œé—®é¢˜éƒ¨åˆ† -->
                <div class="help-section">
                    <h3>æ³¨å†Œç›¸å…³é—®é¢˜</h3>
                    <ul class="help-list">
                        <li><strong>ç”¨æˆ·åå·²è¢«å ç”¨ï¼š</strong>è¯·å°è¯•ä½¿ç”¨å…¶ä»–ç”¨æˆ·åï¼Œæˆ–æ·»åŠ æ•°å­—ã€å­—æ¯ç»„åˆã€‚</li>
                        <li><strong>å¯†ç å¼ºåº¦ä¸è¶³ï¼š</strong>å¯†ç åº”è‡³å°‘åŒ…å«8ä¸ªå­—ç¬¦ï¼ŒåŒ…æ‹¬å­—æ¯å’Œæ•°å­—ã€‚</li>
                        <li><strong>é‚®ç®±éªŒè¯é—®é¢˜ï¼š</strong>æ³¨å†Œåè¯·åŠæ—¶æŸ¥æ”¶éªŒè¯é‚®ä»¶ï¼Œç‚¹å‡»é“¾æ¥å®ŒæˆéªŒè¯ã€‚</li>
                        <li><strong>æ³¨å†Œåæ— æ³•ç™»å½•ï¼š</strong>è¯·ç¡®è®¤å·²å®Œæˆé‚®ç®±éªŒè¯ï¼Œå¦‚æœªæ”¶åˆ°é‚®ä»¶å¯å°è¯•é‡æ–°å‘é€ã€‚</li>
                    </ul>
                </div>
                
                <!-- å¯†ç å®‰å…¨éƒ¨åˆ† -->
                <div class="help-section">
                    <h3>å¯†ç å®‰å…¨æç¤º</h3>
                    <ul class="help-list">
                        <li>è¯·ä¸è¦ä½¿ç”¨è¿‡äºç®€å•çš„å¯†ç ï¼ˆå¦‚123456ã€passwordç­‰ï¼‰ã€‚</li>
                        <li>å»ºè®®å®šæœŸæ›´æ¢å¯†ç ï¼Œæé«˜è´¦æˆ·å®‰å…¨æ€§ã€‚</li>
                        <li>ä¸è¦åœ¨å…¬å…±è®¾å¤‡ä¸Šä¿å­˜ç™»å½•ä¿¡æ¯ã€‚</li>
                        <li>å¦‚å‘ç°è´¦æˆ·å¼‚å¸¸ï¼Œè¯·ç«‹å³ä¿®æ”¹å¯†ç å¹¶è”ç³»æˆ‘ä»¬ã€‚</li>
                    </ul>
                </div>
                
                <!-- è”ç³»ä¿¡æ¯éƒ¨åˆ† -->
                <div class="contact-info">
                    <h3>éœ€è¦è¿›ä¸€æ­¥å¸®åŠ©ï¼Ÿ</h3>
                    <p>å¦‚æœä»¥ä¸Šæ–¹æ³•æ— æ³•è§£å†³æ‚¨çš„é—®é¢˜ï¼Œè¯·è”ç³»æˆ‘ä»¬çš„å®¢æœå›¢é˜Ÿï¼š</p>
                    <p><strong>å®¢æœé‚®ç®±ï¼š</strong> support@dktravel-hainan.com</p>
                    <p><strong>å®¢æœçƒ­çº¿ï¼š</strong> 400-888-8888ï¼ˆå·¥ä½œæ—¥ 9:00-18:00ï¼‰</p>
                    <p><strong>å¾®ä¿¡å®¢æœï¼š</strong> DKTravel-HNï¼ˆæ‰«æäºŒç»´ç æ·»åŠ ï¼‰</p>
                </div>
                
                <!-- æ¸©é¦¨æç¤º -->
                <div class="help-tip">
                    <p><strong>ğŸ’¡ æ¸©é¦¨æç¤ºï¼š</strong> ä¸ºä¿éšœæ‚¨çš„è´¦æˆ·å®‰å…¨ï¼Œè¯·å‹¿å°†ç”¨æˆ·åå’Œå¯†ç å‘ŠçŸ¥ä»–äººã€‚DK Travelæ‰¿è¯ºç»ä¸ä¼šé€šè¿‡ç”µè¯æˆ–é‚®ä»¶å‘æ‚¨ç´¢è¦å¯†ç ã€‚</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="cancel-btn" onclick="closeHelpModal()">å…³é—­å¸®åŠ©</button>
            </div>
        </div>
    </div>

    <script>
        // ===================== æ ¸å¿ƒé…ç½® =====================
        // æµ‹è¯•æ¨¡å¼å¼€å…³ï¼šå‰åç«¯æœªè°ƒè¯•æ—¶è®¾ä¸ºtrueï¼Œè°ƒè¯•å®Œæˆåæ”¹ä¸ºfalse
        const TEST_MODE = true;
        // æœ¬åœ°æ¥å£åœ°å€ï¼ˆè°ƒè¯•æ—¶ä½¿ç”¨ï¼‰
        const API = {
            login: 'http://localhost:8888/login',
            register: 'http://localhost:8888/register',
            forgotPassword: 'http://localhost:8888/forgot-password' // æ–°å¢ï¼šå¿˜è®°å¯†ç æ¥å£
        };

        // ===================== å·¥å…·å‡½æ•° =====================
        // æ˜¾ç¤ºæç¤ºä¿¡æ¯
        function showMessage(elId, text) {
            // éšè—æ‰€æœ‰æç¤º
            document.getElementById('errorMsg').style.display = 'none';
            document.getElementById('successMsg').style.display = 'none';
            // æ˜¾ç¤ºç›®æ ‡æç¤º
            const el = document.getElementById(elId);
            el.textContent = text;
            el.style.display = 'block';
            // 3ç§’åè‡ªåŠ¨éšè—
            setTimeout(() => el.style.display = 'none', 3000);
        }

        // ===================== æ–°å¢ï¼šæ¨¡æ€æ¡†å·¥å…·å‡½æ•° =====================
        // æ˜¾ç¤ºæ¨¡æ€æ¡†æç¤ºä¿¡æ¯
        function showModalMessage(text, isSuccess = false) {
            const modal = document.getElementById('forgotPasswordModal');
            const errorEl = modal.querySelector('#modalErrorMsg');
            const successEl = modal.querySelector('#modalSuccessMsg');
            
            errorEl.style.display = 'none';
            successEl.style.display = 'none';
            
            const targetEl = isSuccess ? successEl : errorEl;
            targetEl.textContent = text;
            targetEl.style.display = 'block';
            
            setTimeout(() => targetEl.style.display = 'none', 3000);
        }

        // ===================== æ–°å¢ï¼šå¸®åŠ©æ¨¡æ€æ¡†æ§åˆ¶å‡½æ•° =====================
        // æ˜¾ç¤ºå¸®åŠ©æ¨¡æ€æ¡†
        function showHelpModal() {
            document.getElementById('helpModal').style.display = 'flex';
        }

        // å…³é—­å¸®åŠ©æ¨¡æ€æ¡†
        function closeHelpModal() {
            document.getElementById('helpModal').style.display = 'none';
        }

        // ===================== å¿˜è®°å¯†ç æ¨¡æ€æ¡†æ§åˆ¶å‡½æ•° =====================
        // æ˜¾ç¤ºå¿˜è®°å¯†ç æ¨¡æ€æ¡†
        function showForgotPasswordModal() {
            document.getElementById('forgotPasswordModal').style.display = 'flex';
        }

        // å…³é—­å¿˜è®°å¯†ç æ¨¡æ€æ¡†
        function closeForgotPasswordModal() {
            document.getElementById('forgotPasswordModal').style.display = 'none';
            // æ¸…ç©ºè¾“å…¥æ¡†
            document.getElementById('resetEmail').value = '';
            document.getElementById('usernameForReset').value = '';
            // æ¸…ç©ºæç¤ºä¿¡æ¯
            const modal = document.getElementById('forgotPasswordModal');
            modal.querySelector('#modalErrorMsg').style.display = 'none';
            modal.querySelector('#modalSuccessMsg').style.display = 'none';
        }

        // ===================== å¿˜è®°å¯†ç åŠŸèƒ½ =====================
        async function handleForgotPassword() {
            const email = document.getElementById('resetEmail').value.trim();
            const username = document.getElementById('usernameForReset').value.trim();

            // é‚®ç®±éªŒè¯
            if (!email) {
                showModalMessage('è¯·è¾“å…¥æ³¨å†Œé‚®ç®±', false);
                return;
            }

            // ç®€å•çš„é‚®ç®±æ ¼å¼éªŒè¯
            const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;
            if (!emailRegex.test(email)) {
                showModalMessage('è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€', false);
                return;
            }

            // æµ‹è¯•æ¨¡å¼ï¼šä¸è°ƒç”¨çœŸå®æ¥å£ï¼Œæ¨¡æ‹Ÿå‘é€é‡ç½®é‚®ä»¶
            if (TEST_MODE) {
                showModalMessage(`é‡ç½®é“¾æ¥å·²å‘é€è‡³ ${email}ï¼Œè¯·æ£€æŸ¥æ‚¨çš„é‚®ç®±ã€‚`, true);
                // 3ç§’åå…³é—­æ¨¡æ€æ¡†
                setTimeout(() => {
                    closeForgotPasswordModal();
                    showMessage('successMsg', 'è¯·æ£€æŸ¥æ‚¨çš„é‚®ç®±å®Œæˆå¯†ç é‡ç½®');
                }, 3000);
                return;
            }

            // çœŸå®æ¥å£è°ƒç”¨ï¼ˆè°ƒè¯•åç«¯åå¯ç”¨ï¼‰
            try {
                const response = await axios.post(API.forgotPassword, {
                    email: email,
                    username: username || null
                });
                
                // é€‚é…åç«¯è¿”å›æ ¼å¼ï¼ˆæ ¹æ®å®é™…æƒ…å†µè°ƒæ•´ï¼‰
                if (response.data.code === 200) {
                    showModalMessage('é‡ç½®é“¾æ¥å·²å‘é€ï¼Œè¯·æ£€æŸ¥æ‚¨çš„é‚®ç®±', true);
                    setTimeout(() => {
                        closeForgotPasswordModal();
                        showMessage('successMsg', 'è¯·æ£€æŸ¥æ‚¨çš„é‚®ç®±å®Œæˆå¯†ç é‡ç½®');
                    }, 3000);
                } else {
                    showModalMessage(response.data.msg || 'å‘é€å¤±è´¥ï¼Œè¯·é‡è¯•', false);
                }
            } catch (error) {
                showModalMessage('ç½‘ç»œé”™è¯¯/æ¥å£æœªå¯åŠ¨ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡', false);
                console.log('å¿˜è®°å¯†ç æ¥å£é”™è¯¯è¯¦æƒ…ï¼š', error);
            }
        }

        // ===================== ç™»å½•åŠŸèƒ½ =====================
        async function handleLogin() {
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value.trim();

            // éç©ºéªŒè¯
            if (!username || !password) {
                showMessage('errorMsg', 'ç”¨æˆ·åå’Œå¯†ç ä¸èƒ½ä¸ºç©º');
                return;
            }

            // æµ‹è¯•æ¨¡å¼ï¼šä¸è°ƒç”¨çœŸå®æ¥å£ï¼Œæ¨¡æ‹Ÿç™»å½•
            if (TEST_MODE) {
                showMessage('successMsg', `ç™»å½•æˆåŠŸï¼å³å°†ä¸ºä½ å®šåˆ¶æµ·å—æ—…è¡Œè®¡åˆ’`);
                // æ¨¡æ‹Ÿä¿å­˜token
                localStorage.setItem('token', 'test_token_123456');
                // æ¨¡æ‹Ÿè·³è½¬ï¼ˆæ³¨é‡Šæ‰ï¼Œé¿å…è¯¯è·³è½¬ï¼‰
                // window.location.href = '/home.html';
                return;
            }

            // çœŸå®æ¥å£è°ƒç”¨ï¼ˆè°ƒè¯•åç«¯åå¯ç”¨ï¼‰
            try {
                const response = await axios.post(API.login, {
                    username: username,
                    password: password
                });
                // é€‚é…åç«¯è¿”å›æ ¼å¼ï¼ˆæ ¹æ®å®é™…æƒ…å†µè°ƒæ•´ï¼‰
                if (response.data.code === 200) {
                    showMessage('successMsg', 'ç™»å½•æˆåŠŸï¼å³å°†è·³è½¬...');
                    localStorage.setItem('token', response.data.data.token);
                    setTimeout(() => window.location.href = '/home.html', 1500);
                } else {
                    showMessage('errorMsg', response.data.msg || 'ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•');
                }
            } catch (error) {
                showMessage('errorMsg', 'ç½‘ç»œé”™è¯¯/æ¥å£æœªå¯åŠ¨ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡');
                console.log('ç™»å½•æ¥å£é”™è¯¯è¯¦æƒ…ï¼š', error);
            }
        }

        // ===================== æ³¨å†ŒåŠŸèƒ½ =====================
        async function handleRegister() {
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value.trim();

            // éç©ºéªŒè¯
            if (!username || !password) {
                showMessage('errorMsg', 'ç”¨æˆ·åå’Œå¯†ç ä¸èƒ½ä¸ºç©º');
                return;
            }

            // æµ‹è¯•æ¨¡å¼ï¼šä¸è°ƒç”¨çœŸå®æ¥å£ï¼Œæ¨¡æ‹Ÿæ³¨å†Œ
            if (TEST_MODE) {
                showMessage('successMsg', `æ³¨å†ŒæˆåŠŸï¼å¿«å»æ¢ç´¢æµ·å—ç¾æ™¯å§`);
                return;
            }

            // çœŸå®æ¥å£è°ƒç”¨ï¼ˆè°ƒè¯•åç«¯åå¯ç”¨ï¼‰
            try {
                const response = await axios.post(API.register, {
                    username: username,
                    password: password
                });
                // é€‚é…åç«¯è¿”å›æ ¼å¼ï¼ˆæ ¹æ®å®é™…æƒ…å†µè°ƒæ•´ï¼‰
                if (response.data.code === 200) {
                    showMessage('successMsg', 'æ³¨å†ŒæˆåŠŸï¼è¯·ç™»å½•');
                } else {
                    showMessage('errorMsg', response.data.msg || 'æ³¨å†Œå¤±è´¥ï¼Œè¯·é‡è¯•');
                }
            } catch (error) {
                showMessage('errorMsg', 'ç½‘ç»œé”™è¯¯/æ¥å£æœªå¯åŠ¨ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡');
                console.log('æ³¨å†Œæ¥å£é”™è¯¯è¯¦æƒ…ï¼š', error);
            }
        }

        // ===================== æ–°å¢ï¼šç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­åŠŸèƒ½ =====================
        window.onclick = function(event) {
            const forgotModal = document.getElementById('forgotPasswordModal');
            const helpModal = document.getElementById('helpModal');
            
            if (event.target === forgotModal) {
                closeForgotPasswordModal();
            }
            
            if (event.target === helpModal) {
                closeHelpModal();
            }
        }

        // ===================== æ–°å¢ï¼šESCé”®å…³é—­æ¨¡æ€æ¡† =====================
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeForgotPasswordModal();
                closeHelpModal();
            }
        });
    </script>
</body>
</html>