<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DK traveler - æµ·å—ä¸“å±æ—…è¡Œè®¡åˆ’</title>
    <!-- å¼•å…¥axios -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <!-- å¼•å…¥Font Awesomeå›¾æ ‡åº“ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* å…¨å±€æ ·å¼é‡ç½® */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft Yahei', sans-serif;
        }

        /* ===================== æ–°å¢ï¼šå…¨å±èƒŒæ™¯è½®æ’­æ ·å¼ ===================== */
        .background-slideshow {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            opacity: 0;
            transition: opacity 2s ease-in-out;
        }

        .slide.active {
            opacity: 1;
        }

        /* èƒŒæ™¯å±‚ */
        body {
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden; /* é˜²æ­¢æ»šåŠ¨ */
        }
        
        /* èƒŒæ™¯é®ç½©å±‚ */
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.4); /* ç¨å¾®åŠ æ·±ä¸€ç‚¹é®ç½©ä»¥åº”å¯¹æ›´äº®çš„å›¾ç‰‡ */
            z-index: 1;
            pointer-events: none;
        }

        /* è¯­è¨€åˆ‡æ¢æŒ‰é’® */
        .lang-switch {
            position: fixed;
            top: 25px;
            left: 25px;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            z-index: 10;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            color: #3182ce;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
        }

        .lang-switch:hover {
            transform: scale(1.05);
            background-color: white;
        }

        /* å¸®åŠ©æŒ‰é’®æ ·å¼ */
        .help-btn {
            position: fixed;
            top: 25px;
            right: 80px; /* ç»™æ¢ç´¢æŒ‰é’®è…¾ä½ç½® */
            width: 50px;
            height: 50px;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            cursor: pointer;
            z-index: 10;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .help-btn:hover {
            transform: scale(1.1);
            background-color: #f8fafc;
        }
        
        .help-btn i {
            font-size: 24px;
            color: #3182ce;
        }

        /* ===================== æ–°å¢ï¼šæ¢ç´¢æŒ‰é’® ===================== */
        .explore-btn {
            position: fixed;
            top: 25px;
            right: 145px;
            height: 50px;
            padding: 0 20px;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 25px;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            cursor: pointer;
            z-index: 10;
            transition: all 0.3s ease;
            font-weight: 600;
            color: #38a169;
            gap: 8px;
        }

        .explore-btn:hover {
            transform: scale(1.05);
            background-color: #38a169;
            color: white;
        }

        /* ç™»å½•å¡ç‰‡ */
        .login-card {
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding: 45px 40px;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
            width: 100%;
            max-width: 420px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            z-index: 2;
        }

        .login-card h2 {
            text-align: center;
            margin-bottom: 8px;
            color: #2d3748;
            font-size: 28px;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .login-subtitle {
            text-align: center;
            color: #4a5568;
            font-size: 16px;
            font-weight: 400;
            width: 100%;
            margin-bottom: 35px;
            line-height: 1.5;
        }

        .input-group {
            margin-bottom: 22px;
        }
        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: #4a5568;
            font-size: 14px;
            font-weight: 500;
        }
        .input-group input {
            width: 100%;
            padding: 14px 18px;
            border: 1px solid #e2e8f0;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
            background-color: rgba(255, 255, 255, 0.8);
        }

        .input-group input:focus {
            outline: none;
            border-color: #3182ce;
            box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.1);
            background-color: white;
        }

        .input-group input::placeholder {
            color: #a0aec0;
            font-size: 15px;
        }

        .forgot-password {
            text-align: right;
            margin-top: 8px;
            margin-bottom: 15px;
        }
        
        .forgot-password a {
            color: #3182ce;
            text-decoration: none;
            font-size: 14px;
            transition: color 0.3s ease;
        }
        
        .forgot-password a:hover {
            color: #2b6cb0;
            text-decoration: underline;
        }

        .btn-group {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
        }
        .login-btn, .register-btn {
            flex: 1;
            padding: 14px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 0.5px;
        }

        .login-btn {
            background-color: #3182ce;
            color: white;
        }
        .login-btn:hover {
            background-color: #2b6cb0;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(49, 130, 206, 0.3);
        }

        .register-btn {
            background-color: #38a169;
            color: white;
        }
        .register-btn:hover {
            background-color: #2f855a;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(56, 161, 105, 0.3);
        }

        .message {
            font-size: 14px;
            text-align: center;
            margin-top: 10px;
            display: none;
            padding: 8px;
            border-radius: 6px;
        }
        .error-message {
            color: #e53e3e;
            background-color: rgba(229, 62, 62, 0.08);
        }
        .success-message {
            color: #38a169;
            background-color: rgba(56, 161, 105, 0.08);
        }

        .test-tip {
            font-size: 12px;
            color: #718096;
            text-align: center;
            margin-top: 15px;
            opacity: 0.8;
        }

        /* æ¨¡æ€æ¡†æ ·å¼ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7); /* åŠ æ·±èƒŒæ™¯ */
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            animation: slideDown 0.3s ease;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            z-index: 1001;
        }
        
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .modal-title {
            font-size: 22px;
            font-weight: 600;
            color: #2d3748;
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #718096;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background-color 0.3s;
        }
        
        .close-modal:hover {
            background-color: #f7fafc;
            color: #2d3748;
        }
        
        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            margin-top: 25px;
        }
        
        .submit-btn, .cancel-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .submit-btn {
            background-color: #3182ce;
            color: white;
        }
        .submit-btn:hover { background-color: #2b6cb0; }
        
        .cancel-btn {
            background-color: #e2e8f0;
            color: #4a5568;
        }
        .cancel-btn:hover { background-color: #cbd5e0; }

        /* å¸®åŠ©å†…å®¹æ ·å¼ */
        .help-content { padding: 0 10px; }
        .help-section { margin-bottom: 25px; }
        .help-section h3 {
            font-size: 18px;
            color: #2d3748;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 2px solid #3182ce;
            display: inline-block;
        }
        .help-section p {
            color: #4a5568;
            line-height: 1.6;
            margin-bottom: 10px;
            font-size: 15px;
        }
        .help-list {
            padding-left: 20px;
            margin-top: 10px;
        }
        .help-list li {
            color: #4a5568;
            line-height: 1.6;
            margin-bottom: 8px;
            font-size: 15px;
        }
        .contact-info {
            background-color: #f7fafc;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            border-left: 4px solid #3182ce;
        }
        .help-tip {
            background-color: #fff9db;
            padding: 12px;
            border-radius: 8px;
            margin-top: 15px;
            font-size: 14px;
            border-left: 4px solid #ffd43b;
        }

        /* ===================== æ–°å¢ï¼šå…¨å±ç”»å»Šæ ·å¼ ===================== */
        .gallery-modal {
            background-color: rgba(0, 0, 0, 0.95);
            z-index: 2000;
        }

        .gallery-container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .gallery-img-container {
            width: 100%;
            height: 85vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .gallery-img {
            max-width: 90%;
            max-height: 100%;
            object-fit: contain;
            border-radius: 8px;
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
        }

        .gallery-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 50px;
            color: white;
            cursor: pointer;
            user-select: none;
            transition: 0.3s;
            opacity: 0.7;
        }

        .gallery-nav:hover { opacity: 1; }
        .gallery-prev { left: 30px; }
        .gallery-next { right: 30px; }

        .gallery-close {
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 40px;
            color: white;
            cursor: pointer;
            z-index: 2001;
        }

        .gallery-counter {
            position: absolute;
            bottom: 20px;
            color: white;
            font-size: 18px;
            background: rgba(0,0,0,0.5);
            padding: 5px 15px;
            border-radius: 20px;
        }

        .gallery-thumbnails {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            overflow-x: auto;
            padding-bottom: 5px;
        }

        .gallery-thumb {
            width: 60px;
            height: 45px;
            object-fit: cover;
            border-radius: 4px;
            cursor: pointer;
            opacity: 0.5;
            border: 2px solid transparent;
            transition: 0.3s;
        }

        .gallery-thumb.active, .gallery-thumb:hover {
            opacity: 1;
            border-color: #3182ce;
        }
    </style>
</head>
<body>

    <!-- å…¨å±èƒŒæ™¯è½®æ’­ -->
    <div class="background-slideshow" id="slideshow">
        <!-- å›¾ç‰‡å°†é€šè¿‡JSåŠ¨æ€æ’å…¥ -->
    </div>

    <!-- è¯­è¨€åˆ‡æ¢æŒ‰é’® -->
    <div class="lang-switch" onclick="toggleLanguage()">
        <i class="fas fa-globe"></i>
        <span id="lang-text">EN</span>
    </div>

    <!-- æ¢ç´¢æŒ‰é’® -->
    <div class="explore-btn" onclick="openGallery()">
        <i class="fas fa-images"></i>
        <span id="explore-text">æ¢ç´¢æµ·å—</span>
    </div>

    <!-- å¸®åŠ©æŒ‰é’® -->
    <div class="help-btn" onclick="showHelpModal()">
        <i class="fas fa-question-circle"></i>
    </div>
    
    <div class="login-card">
        <h2 id="main-title">DK Travel æµ·å—</h2>
        <div class="login-subtitle" id="sub-title">å³åˆ»ç™»å½•ï¼Œè§£é”æ‚¨çš„ä¸ªæ€§åŒ–æµ·å—ä¹‹æ—…ï¼</div>
        <div class="input-group">
            <label for="username" id="label-username">ç”¨æˆ·å</label>
            <input type="text" id="username" placeholder="è¯·è¾“å…¥æ‚¨çš„ç”¨æˆ·å">
        </div>
        <div class="input-group">
            <label for="password" id="label-password">å¯†ç </label>
            <input type="password" id="password" placeholder="è¯·è¾“å…¥æ‚¨çš„å¯†ç ">
            <div class="forgot-password">
                <a href="javascript:void(0)" onclick="showForgotPasswordModal()" id="link-forgot">å¿˜è®°å¯†ç ï¼Ÿ</a>
            </div>
        </div>
        <div class="btn-group">
            <button class="login-btn" onclick="handleLogin()" id="btn-login">ç™»å½•</button>
            <button class="register-btn" onclick="handleRegister()" id="btn-register">æ³¨å†Œ</button>
        </div>
        <div class="message error-message" id="errorMsg"></div>
        <div class="message success-message" id="successMsg"></div>
        <div class="test-tip" id="test-tip">ğŸ’¡ æµ‹è¯•æ¨¡å¼ï¼šæœªè°ƒç”¨çœŸå®æ¥å£ | è”è°ƒæ—¶å…³é—­TEST_MODE</div>
    </div>

    <!-- å¿˜è®°å¯†ç æ¨¡æ€æ¡† -->
    <div id="forgotPasswordModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="fp-title">é‡ç½®å¯†ç </h3>
                <button class="close-modal" onclick="closeForgotPasswordModal()">&times;</button>
            </div>
            <div class="input-group">
                <label for="resetEmail" id="fp-email-label">æ³¨å†Œé‚®ç®±</label>
                <input type="email" id="resetEmail" placeholder="è¯·è¾“å…¥æ³¨å†Œæ—¶ä½¿ç”¨çš„é‚®ç®±åœ°å€">
            </div>
            <div class="input-group">
                <label for="usernameForReset" id="fp-user-label">ç”¨æˆ·åï¼ˆå¯é€‰ï¼‰</label>
                <input type="text" id="usernameForReset" placeholder="è¯·è¾“å…¥ç”¨æˆ·åï¼ˆå¦‚æœè®°å¾—ï¼‰">
            </div>
            <div class="modal-footer">
                <button class="cancel-btn" onclick="closeForgotPasswordModal()" id="fp-cancel">å–æ¶ˆ</button>
                <button class="submit-btn" onclick="handleForgotPassword()" id="fp-submit">å‘é€é‡ç½®é‚®ä»¶</button>
            </div>
            <div class="message error-message" id="modalErrorMsg"></div>
            <div class="message success-message" id="modalSuccessMsg"></div>
        </div>
    </div>

    <!-- å¸®åŠ©æ¨¡æ€æ¡† -->
    <div id="helpModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="help-title">ç™»å½•å¸®åŠ©ä¸­å¿ƒ</h3>
                <button class="close-modal" onclick="closeHelpModal()">&times;</button>
            </div>
            <div class="help-content" id="help-content-area">
                <!-- å†…å®¹ç”±JSå¡«å…… -->
            </div>
            <div class="modal-footer">
                <button class="cancel-btn" onclick="closeHelpModal()" id="help-close-btn">å…³é—­å¸®åŠ©</button>
            </div>
        </div>
    </div>

    <!-- å…¨å±å›¾ç‰‡ç”»å»Š -->
    <div id="galleryModal" class="modal gallery-modal">
        <span class="gallery-close" onclick="closeGallery()">&times;</span>
        <div class="gallery-container">
            <span class="gallery-nav gallery-prev" onclick="changeSlide(-1)">&#10094;</span>
            <div class="gallery-img-container">
                <img class="gallery-img" id="galleryMainImg" src="">
            </div>
            <span class="gallery-nav gallery-next" onclick="changeSlide(1)">&#10095;</span>
            <div class="gallery-counter" id="galleryCounter">1 / 5</div>
            <div class="gallery-thumbnails" id="galleryThumbs">
                <!-- ç¼©ç•¥å›¾ç”±JSç”Ÿæˆ -->
            </div>
        </div>
    </div>

    <script>
        // ===================== 1. å¤šè¯­è¨€é…ç½® =====================
        const i18n = {
            zh: {
                'main-title': 'DK Travel æµ·å—',
                'sub-title': 'å³åˆ»ç™»å½•ï¼Œè§£é”æ‚¨çš„ä¸ªæ€§åŒ–æµ·å—ä¹‹æ—…ï¼',
                'label-username': 'ç”¨æˆ·å',
                'username-placeholder': 'è¯·è¾“å…¥æ‚¨çš„ç”¨æˆ·å',
                'label-password': 'å¯†ç ',
                'password-placeholder': 'è¯·è¾“å…¥æ‚¨çš„å¯†ç ',
                'link-forgot': 'å¿˜è®°å¯†ç ï¼Ÿ',
                'btn-login': 'ç™»å½•',
                'btn-register': 'æ³¨å†Œ',
                'test-tip': 'ğŸ’¡ æµ‹è¯•æ¨¡å¼ï¼šæœªè°ƒç”¨çœŸå®æ¥å£ | è”è°ƒæ—¶å…³é—­TEST_MODE',
                'explore-text': 'æ¢ç´¢æµ·å—',
                'fp-title': 'é‡ç½®å¯†ç ',
                'fp-email-label': 'æ³¨å†Œé‚®ç®±',
                'fp-email-ph': 'è¯·è¾“å…¥æ³¨å†Œæ—¶ä½¿ç”¨çš„é‚®ç®±åœ°å€',
                'fp-user-label': 'ç”¨æˆ·åï¼ˆå¯é€‰ï¼‰',
                'fp-user-ph': 'è¯·è¾“å…¥ç”¨æˆ·åï¼ˆå¦‚æœè®°å¾—ï¼‰',
                'fp-cancel': 'å–æ¶ˆ',
                'fp-submit': 'å‘é€é‡ç½®é‚®ä»¶',
                'help-title': 'ç™»å½•å¸®åŠ©ä¸­å¿ƒ',
                'help-close-btn': 'å…³é—­å¸®åŠ©',
                'msg-err-empty': 'ç”¨æˆ·åå’Œå¯†ç ä¸èƒ½ä¸ºç©º',
                'msg-success-login': 'ç™»å½•æˆåŠŸï¼å³å°†ä¸ºä½ å®šåˆ¶æµ·å—æ—…è¡Œè®¡åˆ’',
                'msg-success-register': 'æ³¨å†ŒæˆåŠŸï¼å¿«å»æ¢ç´¢æµ·å—ç¾æ™¯å§',
                'msg-err-email': 'è¯·è¾“å…¥æ³¨å†Œé‚®ç®±',
                'msg-err-email-format': 'è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€',
                'msg-success-email-sent': 'é‡ç½®é“¾æ¥å·²å‘é€è‡³',
                // å¸®åŠ©å†…å®¹HTML
                'help-content': `
                    <div class="help-section">
                        <h3>å¸¸è§ç™»å½•é—®é¢˜</h3>
                        <ul class="help-list">
                            <li><strong>å¿˜è®°ç”¨æˆ·åæˆ–å¯†ç ï¼š</strong>ç‚¹å‡»ç™»å½•æ¡†ä¸‹æ–¹çš„"å¿˜è®°å¯†ç ï¼Ÿ"é“¾æ¥ã€‚</li>
                            <li><strong>è´¦æˆ·è¢«é”å®šï¼š</strong>è¿ç»­5æ¬¡è¾“å…¥é”™è¯¯å¯†ç ä¼šå¯¼è‡´è´¦æˆ·æš‚æ—¶é”å®šï¼Œè¯·ç­‰å¾…15åˆ†é’Ÿåé‡è¯•ã€‚</li>
                        </ul>
                    </div>
                    <div class="contact-info">
                        <h3>éœ€è¦è¿›ä¸€æ­¥å¸®åŠ©ï¼Ÿ</h3>
                        <p><strong>å®¢æœé‚®ç®±ï¼š</strong> support@dktravel-hainan.com</p>
                    </div>
                `
            },
            en: {
                'main-title': 'DK Travel Hainan',
                'sub-title': 'Login now to unlock your personalized Hainan trip!',
                'label-username': 'Username',
                'username-placeholder': 'Enter your username',
                'label-password': 'Password',
                'password-placeholder': 'Enter your password',
                'link-forgot': 'Forgot Password?',
                'btn-login': 'Login',
                'btn-register': 'Register',
                'test-tip': 'ğŸ’¡ Test Mode: Real API not connected | Turn off TEST_MODE for integration',
                'explore-text': 'Explore Hainan',
                'fp-title': 'Reset Password',
                'fp-email-label': 'Registered Email',
                'fp-email-ph': 'Enter your registered email',
                'fp-user-label': 'Username (Optional)',
                'fp-user-ph': 'Enter username if you remember',
                'fp-cancel': 'Cancel',
                'fp-submit': 'Send Reset Link',
                'help-title': 'Help Center',
                'help-close-btn': 'Close',
                'msg-err-empty': 'Username and password cannot be empty',
                'msg-success-login': 'Login successful! Planning your Hainan trip...',
                'msg-success-register': 'Registration successful! Explore Hainan now!',
                'msg-err-email': 'Please enter your email',
                'msg-err-email-format': 'Please enter a valid email address',
                'msg-success-email-sent': 'Reset link sent to',
                'help-content': `
                    <div class="help-section">
                        <h3>Common Login Issues</h3>
                        <ul class="help-list">
                            <li><strong>Forgot Password:</strong> Click the "Forgot Password?" link below.</li>
                            <li><strong>Account Locked:</strong> 5 consecutive wrong attempts will lock the account for 15 minutes.</li>
                        </ul>
                    </div>
                    <div class="contact-info">
                        <h3>Need More Help?</h3>
                        <p><strong>Email:</strong> support@dktravel-hainan.com</p>
                    </div>
                `
            }
        };

        let currentLang = localStorage.getItem('dk_lang') || 'zh';

        // å›¾ç‰‡åº“ï¼šé«˜è´¨é‡çš„æµ·å—ç›¸å…³å›¾ç‰‡ï¼ˆä½¿ç”¨ Unsplash æºï¼‰
        const hainanImages = [
            { url: 'https://images.unsplash.com/photo-1559695047-26b46e503a77?w=1920', title: 'Hainan Beach' },
            { url: 'https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=1920', title: 'Resort Pool' },
            { url: 'https://images.unsplash.com/photo-1544550581-5f7ceaf7f992?w=1920', title: 'Tropical Forest' },
            { url: 'https://images.unsplash.com/photo-1534190760961-74e8c1c5c3da?w=1920', title: 'Boat Trip' },
            { url: 'https://images.unsplash.com/photo-1476514525535-07fb3b4ae5f1?w=1920', title: 'Sunset View' }
        ];

        let currentGalleryIndex = 0;
        let slideIndex = 0;

        // ===================== åˆå§‹åŒ– =====================
        document.addEventListener('DOMContentLoaded', () => {
            initSlideshow();
            initGallery();
            updateLanguage();
            startSlideshow();
        });

        // ===================== è¯­è¨€åˆ‡æ¢é€»è¾‘ =====================
        function toggleLanguage() {
            currentLang = currentLang === 'zh' ? 'en' : 'zh';
            localStorage.setItem('dk_lang', currentLang);
            updateLanguage();
        }

        function updateLanguage() {
            const lang = i18n[currentLang];
            
            // æ›´æ–°æ™®é€šæ–‡æœ¬
            Object.keys(lang).forEach(key => {
                const el = document.getElementById(key);
                if (el) {
                    if (key === 'help-content-area') {
                        el.innerHTML = lang[key];
                    } else {
                        el.innerText = lang[key];
                    }
                }
            });

            // æ›´æ–°å ä½ç¬¦
            document.getElementById('username').placeholder = lang['username-placeholder'];
            document.getElementById('password').placeholder = lang['password-placeholder'];
            document.getElementById('resetEmail').placeholder = lang['fp-email-ph'];
            document.getElementById('usernameForReset').placeholder = lang['fp-user-ph'];

            // æ›´æ–°è¯­è¨€æŒ‰é’®æ˜¾ç¤ºæ–‡æœ¬
            document.getElementById('lang-text').innerText = currentLang === 'zh' ? 'EN' : 'ä¸­';
        }

        // ===================== èƒŒæ™¯è½®æ’­é€»è¾‘ =====================
        function initSlideshow() {
            const container = document.getElementById('slideshow');
            hainanImages.forEach((img, index) => {
                const div = document.createElement('div');
                div.className = `slide ${index === 0 ? 'active' : ''}`;
                div.style.backgroundImage = `url(${img.url})`;
                container.appendChild(div);
            });
        }

        function startSlideshow() {
            setInterval(() => {
                const slides = document.getElementsByClassName('slide');
                slides[slideIndex].classList.remove('active');
                slideIndex = (slideIndex + 1) % slides.length;
                slides[slideIndex].classList.add('active');
            }, 5000); // 5ç§’åˆ‡æ¢
        }

        // ===================== å…¨å±ç”»å»Šé€»è¾‘ =====================
        function initGallery() {
            const thumbsContainer = document.getElementById('galleryThumbs');
            hainanImages.forEach((img, index) => {
                const thumb = document.createElement('img');
                thumb.src = img.url;
                thumb.className = `gallery-thumb ${index === 0 ? 'active' : ''}`;
                thumb.onclick = () => setCurrentSlide(index);
                thumbsContainer.appendChild(thumb);
            });
            setCurrentSlide(0);
        }

        function openGallery() {
            document.getElementById('galleryModal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeGallery() {
            document.getElementById('galleryModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function changeSlide(n) {
            setCurrentSlide(currentGalleryIndex + n);
        }

        function setCurrentSlide(n) {
            if (n >= hainanImages.length) currentGalleryIndex = 0;
            else if (n < 0) currentGalleryIndex = hainanImages.length - 1;
            else currentGalleryIndex = n;

            document.getElementById('galleryMainImg').src = hainanImages[currentGalleryIndex].url;
            document.getElementById('galleryCounter').innerText = `${currentGalleryIndex + 1} / ${hainanImages.length}`;

            // æ›´æ–°ç¼©ç•¥å›¾çŠ¶æ€
            const thumbs = document.getElementsByClassName('gallery-thumb');
            for (let i = 0; i < thumbs.length; i++) {
                thumbs[i].classList.remove('active');
            }
            thumbs[currentGalleryIndex].classList.add('active');
        }

        // ===================== åŸæœ‰ä¸šåŠ¡é€»è¾‘ (é€‚é…å¤šè¯­è¨€) =====================
        const TEST_MODE = true;
        const API = {
            login: 'http://localhost:8888/login',
            register: 'http://localhost:8888/register',
            forgotPassword: 'http://localhost:8888/forgot-password'
        };

        function getText(key) {
            return i18n[currentLang][key];
        }

        function showMessage(elId, text) {
            document.getElementById('errorMsg').style.display = 'none';
            document.getElementById('successMsg').style.display = 'none';
            const el = document.getElementById(elId);
            el.textContent = text;
            el.style.display = 'block';
            setTimeout(() => el.style.display = 'none', 3000);
        }

        function showModalMessage(text, isSuccess = false) {
            const modal = document.getElementById('forgotPasswordModal');
            const errorEl = modal.querySelector('#modalErrorMsg');
            const successEl = modal.querySelector('#modalSuccessMsg');
            errorEl.style.display = 'none';
            successEl.style.display = 'none';
            const targetEl = isSuccess ? successEl : errorEl;
            targetEl.textContent = text;
            targetEl.style.display = 'block';
            setTimeout(() => targetEl.style.display = 'none', 3000);
        }

        function showHelpModal() {
            // ç¡®ä¿å†…å®¹æ˜¯å½“å‰è¯­è¨€
            document.getElementById('help-content-area').innerHTML = getText('help-content');
            document.getElementById('helpModal').style.display = 'flex';
        }
        function closeHelpModal() { document.getElementById('helpModal').style.display = 'none'; }
        function showForgotPasswordModal() { document.getElementById('forgotPasswordModal').style.display = 'flex'; }
        function closeForgotPasswordModal() {
            document.getElementById('forgotPasswordModal').style.display = 'none';
            document.getElementById('resetEmail').value = '';
            document.getElementById('usernameForReset').value = '';
        }

        async function handleForgotPassword() {
            const email = document.getElementById('resetEmail').value.trim();
            if (!email) { showModalMessage(getText('msg-err-email'), false); return; }
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) { showModalMessage(getText('msg-err-email-format'), false); return; }

            if (TEST_MODE) {
                showModalMessage(`${getText('msg-success-email-sent')} ${email}`, true);
                setTimeout(() => { closeForgotPasswordModal(); showMessage('successMsg', 'Please check your email'); }, 3000);
                return;
            }
            // çœŸå®æ¥å£é€»è¾‘...
        }

        async function handleLogin() {
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value.trim();
            if (!username || !password) { showMessage('errorMsg', getText('msg-err-empty')); return; }
            if (TEST_MODE) {
                showMessage('successMsg', getText('msg-success-login'));
                localStorage.setItem('token', 'test_token_123456');
                return;
            }
            // çœŸå®æ¥å£é€»è¾‘...
        }

        async function handleRegister() {
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value.trim();
            if (!username || !password) { showMessage('errorMsg', getText('msg-err-empty')); return; }
            if (TEST_MODE) {
                showMessage('successMsg', getText('msg-success-register'));
                return;
            }
            // çœŸå®æ¥å£é€»è¾‘...
        }

        window.onclick = function(event) {
            const forgotModal = document.getElementById('forgotPasswordModal');
            const helpModal = document.getElementById('helpModal');
            const galleryModal = document.getElementById('galleryModal');
            if (event.target === forgotModal) closeForgotPasswordModal();
            if (event.target === helpModal) closeHelpModal();
            if (event.target === galleryModal) closeGallery();
        }

        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeForgotPasswordModal();
                closeHelpModal();
                closeGallery();
            }
            // ç”»å»Šé”®ç›˜å·¦å³é”®æ”¯æŒ
            if (document.getElementById('galleryModal').style.display === 'flex') {
                if (event.key === 'ArrowLeft') changeSlide(-1);
                if (event.key === 'ArrowRight') changeSlide(1);
            }
        });
    </script>
</body>
</html>